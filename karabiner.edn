;; karabiner.edn 1.0 2024-10-10

{ ;;? DEFINITIONS (profiles, devices, applications, io-sources, templates, modifiers froms, tos, layers, simlayers)
;; for templates (aliases for frequently used CLI strings), layers, simlayers
	;;? PROFILES
	
	;;? DEVICES

	;;? APPLICATIONS
	
	;;? INPUT SOURCES

	;;? TEMPLATES
	:templates { ;;= ..................................................................................................................... aliases for shell commands including osascript (execute Applescript file), and afplay (plays sound file)
		:run "%s"
		:open "open \"%s\"" ; open file
		:km "osascript -e 'tell application \"Keyboard Maestro Engine\" to do script \"%s\"'"
		:btt "osascript -e 'tell application \"BetterTouchTool\" to  trigger_named \"%s\"'"
	;; Sounds and Audio Feedback invokded by calling `afplay`, use of emojis to make itmore readable but sometimes causes issues
		:SPKR0 "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrillIn.aiff"
		:SPKR1 "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrillOut.aiff"
		:SPKR2 "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrawerClosing.aiff"
		:SPKR3 "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrawerClosing.aiff"
		:ğŸ”ˆ "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrillIn.aiff"
		:ğŸ”‰ "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrillOut.aiff"
		:ğŸ”Š "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrawerClosing.aiff"
		:ğŸ“¢ "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrawerClosing.aiff" 
		:ğŸ› "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/Focus2.aiff" ;; high-pitched click
		:ğŸ”” "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/WindowActivated.aiff" ;; nice sounding soft beep
		;; ğŸ›ğŸ””ğŸ“¯
		:Focus2 "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/Focus2.aiff" ;; high-pitched click
		:beep "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/WindowActivated.aiff" ;; nice sounding soft beep
		:morse "afplay /System/Library/Sounds/morse.aiff" ;; don't really like this 1 as much...
		:pop "afplay /System/Library/Sounds/Pop.aiff"
		:tink "afplay /System/Library/Sounds/Tink.aiff"	
		:soundOn "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrillOut.aiff"
		:soundOff "afplay /System/Library/PrivateFrameworks/ScreenReader.framework/Versions/A/Resources/Sounds/DrillIn.aiff"
		;; :gokurl "goku" ;; trying to add load goku
		}

	;;? MODIFIERS
	;;? FROMS
	;;? TOS

	;;? LAYERS
	:layers { ;;=............................................................................................................................. basic layers like spacemode
		:space-mode {:key :spacebar :condi [:!f& :!d& :!c& :!k& :!w& :!Rctrl-mode :!LCMD :!grave-mode :!quote-mode :!slash-mode :!periodÂµ :!return-mode]} ; prevents space mode from overiding F and D modes 
		:Rctrl-mode {:key :right_control :alone {:key :spacebar} :condi [:!f& :!d& :!c& :!k& :!w& :!space-mode]} ; :Rctrl-mode {:key :right_control :condi [:!f& :!d& :!c& :!k& :!w&]}			
	;;* NEW Super-modes
		;;row1 escapeÂµ, F1Âµ, F12Âµ,
		;;row2 tildeÂµ, 1Âµ, hyphenÂµ, equal_signÂµ, deleteÂµ
			:grave-mode {:key :grave_accent_and_tilde :condi [:!f& :!d& :!c& :!k& :!w& :!Rctrl-mode :!LCMD :!grave-mode :!backslash-mode :!quote-mode :!slash-mode :!equal_sign& :!return-mode]}
			:1Âµ {:key :1}
				;; [ ] search and replace...
			:equal_sign& {:key :equal_sign :condi [:!f& :!d& :!c& :!k& :!w& :!Rctrl-mode :!LCMD :!grave-mode :!backslash-mode :!quote-mode :!slash-mode :!equal_sign& :!return-mode]}
		;;row3 tabÂµ, [/] (open_bracketÂµ), `\` (backslashÂµ)
			; :tab-mode {:key :tab} ;; tab currently assigned to fn for left hand window focus switching via Context
			;; should probably ad tab as a tuper mode bc then can make 	qwerty fn+character... or maybe theres a way to do it with spacebar+ capslock and 
			:backslash-mode {:key :backslash :condi [:!f& :!d& :!c& :!k& :!w& :!Rctrl-mode :!LCMD :!grave-mode :!backslash-mode :!quote-mode :!slash-mode :!equal_sign& :!return-mode]}
		;;row4 caps_lockÂµ, semicolonÂµ, quoteÂµ, returnÂµ
			:quote-mode {:key :quote condi [:!f& :!d& :!c& :!k& :!w& :!Rctrl-mode :!LCMD :!grave-mode :!backslash-mode :!quote-mode :!slash-mode :!equal_sign& :!return-mode]}
			:return-mode {:key :return_or_enter :condi [:!f& :!d& :!c& :!k& :!w& :!Rctrl-mode :!LCMD :!grave-mode :!backslash-mode :!quote-mode :!slash-mode :!equal_sign& :!return-mode :!space-mode]}
		;;row5 left_shiftÂµ, zÂµ, xÂµ, `,` (commaÂµ), `.` (periodÂµ), / (slashÂµ), right_shiftÂµ
			;; [ ] 
			:slash-mode {:key :slash :condi [:!space-mode :!f& :!d& :!c& :!k& :!w& :!Rctrl-mode :!LCMD :!grave-mode :!backslash-mode :!quote-mode :!slash-mode :!equal_sign& :!return-mode]}
			:periodÂµ {:key :period :condi [:!space-mode :!f& :!d& :!c& :!k& :!w& :!Rctrl-mode :!LCMD :!grave-mode :!backslash-mode :!quote-mode :!slash-mode :!equal_sign& :!return-mode]}
		;;row6 left_arrowÂµ, right_arrowÂµ, up_arrowÂµ, down_arrowÂµ
			;; [ ] figure out if arrows get triggered when space+jlik
	}

	;;? SIMLAYERS
	:simlayers { ;;=........................................................................................................................advanced layers that act as vairables
		;; :semicolon-mode {:key :semicolon} :! taken out in preference to have semicolon mapped to `fn` for use with Context's quick search
		:a& {:key :a}
		:b& {:key :b}
		:c& {:key :c}
		:d& {:key :d :condi :!space-mode} ;why is this here?
		:e& {:key :e}
		:f& {:key :f}
		:g& {:key :g}
		:h& {:key :h}
		:i& {:key :i}
		:j& {:key :j}
		:k& {:key :k}
		:l& {:key :l}
		:m& {:key :m}
		:n& {:key :n}
		:o& {:key :o}
		:p& {:key :p}
		:q& {:key :q}
		:r& {:key :r}
		:s& {:key :s}
		:t& {:key :t}
		:u& {:key :u}
		:v& {:key :v}
		:w& {:key :w}
		:x& {:key :x}
		:y& {:key :y}
		:z& {:key :z}
	}

;;? ğŸ‘¿ CHEATSHEET
:main [ ;;? MAIN RULES ==========================================
;;= SIMULTANEOUS KEYS =====================================
;;? ASSORTED RULES =====================================
;; [ ] decide on format (readability by line length or more on 1 line?)
	;; like yellow* associated with description and blue â€¢ associated with rule

	
	{:des "right_shift+space for underscore/dash":rules[ ;;* right-shift+spacebar
		[:!Rspacebar :hyphen] ;;â€¢ right_shift+spacebar for hyphen "-" (aka dash)
		[:!SRspacebar :!Shyphen] ;;â€¢ both shift + spacebar for underscore 
		;; COMMENTS: 
			;; modified to always require rightshift
			;; was causing issues with UHK right control still need #todo
				;; [:!Sspacebar :!Shyphen] ;;- left_shift+spacebar for underscore "_"
			;; 
		]}

	;;* double press âŒ˜+q to quit to prevent accidental
		{:des "double press âŒ˜+q to quit " :rules[ [:!C#Pq [ :!Cq ["âŒ˜q" 0]] ["âŒ˜q" 1]] [:!C#Pq ["âŒ˜q" 1] nil {:delayed {:invoked ["âŒ˜q" 0] :canceled ["âŒ˜q" 0]}}] ]}
		
;;= HYPER MODE and MODIFIERS ==============================
	;;* capslock as hyper
		{:des "Capslock as hyper" :rules [ [:condi :!space-mode :!Rctrl-mode] ;;* Capslock as hyper (command+shift+option+control)
		[:##caps_lock :!!left_control nil {:alone :escape} ] ]}
	
	;;* FN stuff (semicolon as fn, fn from UHK, 
		{:des "Semicolon as fn" :rules [ [:condi :!space-mode :!Rctrl-mode] ;;* Semicolon as FN for use with Contexts quicksearch
		[:##semicolon :##fn nil {:alone :semicolon}] ]}
		;;TODO fn is used with Contexts for quick witching
		;;* fn from UHK
			{:des "FN from UHK" :rules [[:#SOCTf24 :fn [:uhk] ]]} ;;* UHK FN as mac fn via UHK hardcoded f24 > fn in KE but only for uhk
			{:des "FN from UHK 2" :rules [[:#SOCTf24 :fn [:uhk-2] ]]} ;;* for V2
	
;;? iPad defaults ==========
	{:des "iPad defaults" :rules [ 
		[:!Cperiod [[:SPKR3] :escape]] ;;â€¢ âŒ˜+period for escape
		[:!Cperiod [[:SPKR3] :escape]] ;;â€¢ ğŸŒ+\ for cycle sidevview
		;; [:!Cperiod [[:SPKR3] :escape]] ;;â€¢ ğŸŒ+q for Quick Note #todo
		[:!!CSOTgrave_accent_and_tilde [[:SPKR3] :!Tf4]] ;;â€¢ ğŸŒ+` cycle focus between windows #todo broken 
		[:!!backslash [[:SPKR3] :!Ti]] ;;â€¢ ğŸŒ+\ show/hide sideview
		;; [:!Treturn_or_enter [[:SPKR3] [:btt "Show Context Menu for Selected Item"]]] ;;â€¢ âŒƒ+return for context menu #??? did i add this before new Seqoia 
		;; [:!Treturn_or_enter [[:SPKR3] :insert]] ;;â€¢ âŒƒ+return for context menu
		;; [:m [[:SPKR3] [:btt "Show Context Menu for Selected Item"]] ] ;;â€¢ c+m for btt "Show Context Menu+ for Selected Item" âœ¨ NEW 12/01/23
	]}

;;? SPACE MODE ===============
	{:des "spacebar mode" :rules [ ;;*= SPACE MODE =======================
	;; COMMENTS:
	;; homerow keyboard
		[:##b :spacebar :space-mode]        ;;â€¢ spacebar+b for space
		; jlik for â†â†‘â†’â†“ (left/right/up/down arrows)
			[:##j :left_arrow  :space-mode]  ;;â€¢ spacebar+j for â†
			[:##l :right_arrow :space-mode] ;;â€¢ spacebar+l for â†’
			[:##i :up_arrow    :space-mode]    ;;â€¢ spacebar+i for â†‘
			[:##k :down_arrow  :space-mode]  ;;â€¢ spacebar+k for â†“
		; spacebar+;/o/u/p/h/y for non-text characters (â†©â‡¥, delete, page up/down)
			[:##semicolon :return_or_enter :space-mode] ;;* spacebar+return for â†©
			[:##o :tab :space-mode] ;;* spacebar+u for tab
			[:##u :!Stab :space-mode] ;;* spacebar+u for â‡§+tab
			[:##p :delete_or_backspace :space-mode] ;;* spacebar+p for delete
			[:##y :page_up :space-mode] ;;* spacebar+y for page up
			[:##h :tab :space-mode] ;;* spacebar+h for â‡¥
		; spacebar+asdf for modifiers (â‡§âŒ¥âŒ˜âŒƒ)
			;;todo (remember thought about c instead F (check omf project))
			[:##a :left_control :space-mode] ;;* spacebar+a for ctrl
			[:##s :left_shift :space-mode] ;;* spacebar+s for shift
			[:##d :left_option :space-mode] ;;* spacebar+d for option
			[:##f :right_command :space-mode] ;;* spacebar+f for cmd
			[:##caps_lock :fn :space-mode] ;;* spacebar+caps_lock for 
	;; spacebar+xxx for shift modifiers
		[:##comma :!Scomma :space-mode] ;;â€¢ spacebar+comma for "<"
		[:##period :!Speriod :space-mode] ;;â€¢ spacebar+period for ">""
	;; spacebar+MISC for v clipboard history, m moom, c contexts, REMOVED w for contexts and tab for contexts
		[:##v [[:SPKR3][:km "Clipboard History Switcher"]] :space-mode]  ;;â€¢ spacebar+v for "Clipboard History" (via KM macro)
		[:##m [[:SPKR3]:!!f14] :space-mode] [:##m [[:SPKR2]:!!f14] :Rctrl-mode] ;;â€¢ spacebar+m for activate moom (like this one better)
		[:##c [[:SPKR3]:!CTOw] :space-mode] [:##c [[:SPKR2]:!Ospacebar] :Rctrl-mode] ;;â€¢ spacebar+c to activate Contexts
		[:##return_or_enter [[:SPKR3]:!Of12] :space-mode]  ;;â€¢ spacebar+return for Bartender Search menu bar items (via âŒ¥+F12 in Bartender) ğŸŸ¢ğŸ”°new
	;; todo something with tab, tilde ect.... [:##tab :#menu]
	;; TODO
		;; use with
		;; [ ] +1/2/3/4 for...
		;; [ ] F1/f2/f3/f4 for... F11 to F22
		]}

;;? A MODE (EMPTY) ========================================================
	;; leave empty and see vscode://file/Users/loudog/Sync/config.files/Karabiner/krb-purged.edn:144
;;? B MODE ================================================================
	{:des " b-mode for b things" :rules [ :b&
		[:i :vk_consumer_brightness_up] ;;â€¢ +i for brightness up
		[:d :vk_consumer_brightness_down] ;;â€¢ b+d for brightness
		; Bear
			[:r [:km "Jump to Bear"] ] ;;â€¢ b+r for Jump to Bear insgrey 
			;;TODO add back new bear, jump to bear, toggle bear....	
		;; BTT stuff
			;;TODO add back btt named menus, save active window for recall
	]}
;;? C MODE ================================================================
	{:des "c-mode for c things" :rules [ :c& ;;* â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
		[:d :!Cquote] ;;â€¢ c+d for âŒ˜+quote (evernote default shortcut for "focus tag field")
		[:w [:km "Move Mouse to Focused Window"] ] ;;â€¢ c+w for km "Move Mouse to Focused Window" âœ¨new 6/12/23
		[:m [[:SPKR3] [:btt "Show Context Menu for Selected Item"]] ] ;;â€¢ c+m for btt "Show Context Menu+ for Selected Item" âœ¨ NEW 12/01/2	
		; macOS spaces
			[:comma [[:SPKR3] :!STOcomma]] ;;â€¢ c+comma for Switch Active Workspace Left (via System Hotkeys) ğŸŸ¤ recently re-activated
			[:period [[:SPKR3] :!STOperiod]] ;;â€¢ c+period for Switch Active Workspace Right (via System Hotkeys
		; c+1/2/3 for clipboard
			[:1 [:km "copy clipboard 1"] ] ;;â€¢ c+1 copy to clipboard 1
			[:2 [:km "copy clipboard 2"] ] ;;â€¢ c+2 copy to clipboard 2
			[:3 [:km "copy clipboard 3"] ] ;;â€¢ c+3 copy to clipboard 3
	
	;;TODO for c-mode 
		;; [ ] add back km "picklist cheatsheet"
		;; rehome [:a [:km "Jump to Fantastical"] ] ;;â€¢ c+a for km "Jump to Fantastical"
		;; rehome [:o [:km "Query Contacts"] ] ;;â€¢ c+o for km "Query Contacts"

	]}
;;? D MODE ================================================================
	{:des "d-mode for d things" :rules [ :d& ;;================================== D MODE
		;; d+asfg for tab manipulation..........................................
			[:a :!Copen_bracket] 	;;â€¢ d+a for Page Back via âŒ˜[
			[:s :!TStab] 			;;â€¢ d+s for tab left via âŒƒâ‡¥
			[:f :!Ttab] 			;;â€¢ d+f for tab right via â‡§âŒƒâ‡¥
			[:g :!Cclose_bracket] 	;;â€¢ d+g for Forward Page via âŒ˜]
		[:t [[:SPKR3] :dictation] ] ;;* d+t for Dictate Text (via â‡§âŒƒâŒ˜d hotkey set in System Preferencees > Keyboard > Dictation)
		[:c :!Cquote] 				;;* d+c for âŒ˜+quote (edit tags in omnifocus, evernote ect...)
		[:k [ :open  "/Users/loudog/Desktop"] ] ;;â€¢ d+k for Switch Third Space Right
	;;TODO (D MODE)
		;; [:q [:right_gui :right_gui ]] ;;* d+q for ask siri via double press
		;; #common-commands
			;; [:w [:km "Item Up Â©"]] ;;â€¢ d+w for Item Up (global KM context "Item Up Â©")
			;; [:v [:km "Item Down Â©"]] ;;â€¢ d+v for Item Down (global KM context "Item Down Â©")
		;; rehome [:0 [:btt "raycast-todo-menuapp"] ] ;;â€¢ d+0 for Raycast todo works 
		;; rehome [:delete_or_backspace [:btt "raycast-todo-menuapp"] ] ;;â€¢ d+0 for Raycast todo works	
	]}
;;? E MODE ================================================================
	{:des "e-mode for e things" :rules [ :e& ;;===== ============================
		[:c [:km "Try Current Macro"] ] ;;â€¢  e+c for "Try Current Macro" (via KM)
 	;;TODO (E MODE)
		;; [:f [:open "kmtrigger://macro=EFE846C8-9B93-47C5-9A9F-9EBA0D76D79F"] ] ;;â€¢ e+f for float notes for app ğŸ”° 
		;; Broken [:u [:open "file:///Users/loudog/Library/Application%20Support/KeyCue/KeyCue-URLs.txt"]] ;;â€¢ edit Key Cue URL's via
	]}
;;? F MODE ================================================================
	{:des "f-mode for f things" :rules [ :f&
	;;TODO (F MODE)
	]}
;;? F MODE ================================================================
	{:des "f-mode for f things" :rules [ :f&
	;; f+l-cmd/space/r-cmd for left click, right click, and button 3
		[:spacebar :button1] [:right_control :button1] ;;â€¢ f+spacebar for left-click (f+right-control same thing with UHK compatability)
 		[:right_gui :button2];;â€¢ f+right_command for right-click
 		[:left_gui :button3];;â€¢ f+left_command for "button3" ... (!Cbutton1 doesn't work as a <to> but can be recreated using button3)
	;; fulle keyboard acces
		

	;;TODO (F MODE)
		;; [ ] work back in :km "Focus 1", (add Â© and consolidate) #common-commands
		;; [ ] revisit slate focus windows (no equivilent)
		[:b [[:SPKR3] [:btt "Show Menu Bar in Context Menu"]] ] ;;â€¢ f+b for btt "Show Context Menu for Selected Item"
		[:n [:open "kmtrigger://macro=EFE846C8-9B93-47C5-9A9F-9EBA0D76D79F"] ] ;;â€¢ f+n for float notes for app ğŸ”° 
		[:p [:open "kmtrigger://macro=B4905F39-C99B-4DC8-B0F1-D86DA7E3DE6A"] ] ;;â€¢ f+p for ğŸ¨ğŸ¥ Float Palette
		;; [:m [:open "kmtrigger://macro=1D8E356F-C110-48C0-982B-7895C037B349"] ] ;;â€¢ f+m for Float Front Window with Marked
		;; [:l [:open "raycast://extensions/raycast/floating-notes/toggle-floating-notes-window"] ] ;;â€¢ f+l for raycast floating notes (via URL)
		;;todo [:k  [:open "shortcuts://run-shortcut?id=2D1A4FED-D5A1-4122-A125-7D5BF6C45E20"]] ;;â€¢ f+k Full Keyboard Access Toggle via shortcuts

	]}
;;? G MODE ================================================================
	{:des "g-mode for g things" :rules [ :g&
		[:spacebar [:km "Click GUI Button"]] ;;â€¢ g+spacebar for Click GUI Button
		[:right_control [:km "Click GUI Button"]] ;;â€¢ g+right_control for Click GUI Button (for compatability with UHK split spacebar)
		[:k [[:run "goku"] [:tink]] ] ;;â€¢ g+k to run goku #1... works!
		
		[:j [:t :e :s :t]] ;;â€¢ g+j to run test		

	;;TODO (G MODE)
		;; change below to use shortcuts template (after replacing)
			;; [:o [:open "shortcuts://run-shortcut?id=E5ADC50C-B86E-47C7-8125-D437598EDA92"] ] ;;â€¢ g+o to run GO Ultra shortcut (double-tap on phone...)
		;; [ ] circleback to rabbit hole
		;; think through test
	]}
;;? H MODE ================================================================
	{:des "h-mode for h things" :rules [ :h&
		[:d [[:SPKR3] [:km "Â© Hide Application"] ]] ;;â€¢ h+d for Â© Hide Application
		[:k [[:SPKR3] :!Th]] ;;â€¢ h+k for Hookmark (via âŒƒh) ğŸ”° new 8/11/23

	;;TODO (H MODE)
		;; âŒ rework  [:i [[:SPKR3] :!Ti] ];;â€¢ h+i for Slidepad (via âŒƒi) ğŸ”° new 8/17/23, see if causes false positives
		;; rehome 		[:w [[:SPKR3] [:km "Float Obsidian Workbench with Marked"]]] ;;â€¢ w+b Float Obsidian Workbench with Marked
		;; rework 		[:p [[:SPKR3] [:open "/Applications/Setapp/MenubarX.app" ] ]] ;;â€¢ h+p for MenuBarX via :open (instead of âŒ¥+x hotkey)
	]}

;;? I MODE (EMPTY) ================================================================
	;; {:des "i-mode for i things" :rules [ :i&
	;; TODO (I MODE)
	;; ]}
;;? J MODE ================================================================
	{:des "j-mode for j things" :rules [ :j&
		[:w [[:SPKR3] :!CTOw]] ;;â€¢ j+w for Jump to Window (via Context hotkey âŒ¥space) -> 2024-08-21 chaged from !Ospacebar to 
	;;TODO (J MODE)
		;; rework Jump to.... (see vscode://file/Users/loudog/Sync/config.files/Karabiner/krb-purged.edn:273)
			[:s [ [:SPKR3]  :!OSCj ] ] ;;â€¢ j+s Search (Jump to) SideNotes (via âŒ¥â‡§âŒ˜+j)
			;; [:b [:km "Jump to Bear"]] ;;â€¢ j+b for Jump to BearË›st (global)
			;; [:o [:km "Jump to OmniFocus"]] ;;â€¢ j+o for Jump to OmniFocus ğŸŸ¡ needs work > ğŸŸ¢ better now
			;; [:r [ [:SPKR3] [:open "kmtrigger://macro=047B91AB-DBCA-4976-BE79-C9A0603FA8B2"]]] ;;â€¢ j+r JUMP TO Apple Reminders (via km macro that uses GoodTask)
			;; [:p [:open "kmtrigger://macro=66C07414-FE85-44A0-A5DC-2C2DAD502E26"]] ;;â€¢ j+p for Jump to Palette via KM
			;; [:r [ [:SPKR3] [:open "alfred://runtrigger/com.jc.roampagesearch/roamSearchKE/?arg"]]] ;;â€¢ j+r Search Roam
		;; #common-command
			;; [:right_command [:km "Jump To..."]] ;;â€¢ j+right command for common command Jump to â­• TODO
			;; [:t [:km "Â© Jump To"]] ;;â€¢ j+t for Â© Jump To (via KM global contextual)
			;; [:right_gui [:km "Â© Jump To"]] ;;â€¢ j+right_gui for... AVAILABLE

	]}

;;? K MODE ================================================================
	{:des "k-mode for k things" :rules [ :k&
	;;TODO (K MODE)
	]}


;;? L MODE ================================================================
	{:des "l-mode for l things" :rules [ :l&
	;;TODO (L MODE)
	]}

;;? M MODE ================================================================
	{:des "m-mode for m things" :rules [ :m&
	;;TODO (M MODE)
	]}

;;? N MODE ================================================================
	{:des "n-mode for n things" :rules [ :n&
	;;TODO (N MODE)
	]}

;;? O MODE ================================================================
	{:des "o-mode for o things" :rules [ :o&
	;;TODO (O MODE)
	]}

;;? P MODE ================================================================
	{:des "p-mode for p things" :rules [ :p&
	;;TODO (P MODE)
	]}

;;? Q MODE ================================================================
	{:des "q-mode for q things" :rules [ :q&
	;;TODO (Q MODE)
	]}

;;? R MODE ================================================================
	{:des "r-mode for r things" :rules [ :r&
	;;TODO (R MODE)
	]}

;;? S MODE ================================================================
	{:des "s-mode for s things" :rules [ :s&
	;;TODO (S MODE)
	]}

;;? T MODE ================================================================
	{:des "t-mode for t things" :rules [ :t&
	;;TODO (T MODE)
	]}

;;? U MODE ================================================================
	{:des "u-mode for u things" :rules [ :u&
	;;TODO (U MODE)
	]}

;;? V MODE ================================================================
	{:des "v-mode for v things" :rules [ :v&
	;;TODO (V MODE)
	]}

;;? W MODE ================================================================
	{:des "w-mode for w things" :rules [ :w&
	;;TODO (W MODE)
	]}

;;? X MODE ================================================================
	{:des "x-mode for x things" :rules [ :x&
	;;TODO (X MODE)
		;; clear notification
		;; rehome 		[:l [:!Ta :!TSe :!Sright_arrow [:SPKR3] [:km "Extract URL from Selection"]]  ] ;;â€¢ compiled >>> did keyboard sequence, DID sound, DID KM ğŸ˜€ğŸ˜€ğŸ˜€ğŸ˜€ğŸ˜€ğŸ˜€ğŸ˜€
		;;  #common-command
			;; 	[:u [:km "Â© Copy URL"]] ;;â€¢ x+u for Â© Copy URL (via KM global context)

	]}

;;? Y MODE (EMPTY) ================================================================
	;; {:des "y-mode for y things" :rules [ :y&
	;;TODO (Y MODE)
	;; ]}

;;? Z MODE (rework to layer mode?)================================================================
	{:des "z-mode for z things" :rules [ :z&
		[:i :volume_increment] ;;â€¢ z+i for volume up
		[:k :volume_decrement] ;;â€¢z+k for volume down
		[:p :vk_consumer_brightness_up] ;;â€¢ z+p for brightness up
		[:n :vk_consumer_brightness_down] ;;â€¢ z+n for brightness down

	;; TODO (Z MODE)
	]}

;;? PERIOD MODE ====================================================
	{:des " period-mode for typinator and autocomplete":rules [
    :periodÂµ ;;â€¢ â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
		[:spacebar [[:SPKR3] :!STperiod] ] ;;â€¢ period+left_shift for Typinator Suggest Abbreviation (via âŒƒâ‡§+. hotkey set in app pref)
	]}

;;============================ QUOTE MODE (NEW TEMPLATE)============================
;; NOTE: quote is set as left control for emacs (no it's)
{	:des "quote-mode for..." :rules [
	:quote& ;;* â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
	
]}

;;============================ EQUALSIGN (NEW TEMPLATE)============================
{	:des "equal-sign for..." :rules [
	:equal_sign& ;;* â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“

	 	[:a [[:SPKR3] [:open "raycast://extensions/raycast/apple-notes/new?arguments=%7B%22text%22%3A%22%22%7D"]] ] ;;â€¢ =+a for new apple note (via raycast)
	 	[:b [[:SPKR3] [:open "raycast://extensions/hmarr/bear/new-note"]] ] ;;â€¢ =+b for new bear 
	 	
		[:d [[:SPKR3] [:open "raycast://extensions/FlohGro/drafts/create-draft-and-open"]] ] ;;â€¢ =+d for new drafts
		;; [:d [:km "Jump to Drafts (global)"]] ;;â€¢ /+d for Jump to Drafts (global) ğŸ¿âŒ disable for jump to journal

	 	[:o [[:SPKR3] [:open "raycast://extensions/KevinBatdorf/obsidian/createNoteCommand"]] ] ;;â€¢ =+o for new obsidian
	 	[:l [[:SPKR3] [:open "raycast://extensions/futantan/logseq/index"]] ] ;;â€¢ =+l for new logseq
	 	[:r [[:SPKR3] [:open "raycast://extensions/raycast/apple-reminders/create-reminder"]] ] ;;â€¢ =+r for reminders
	 	[:u [[:SPKR3] [:open "raycast://extensions/praveenjuge/ulysses/new-empty-sheet"]] ] ;;â€¢ =+u for ulyses 
		[:f [[:SPKR3] [:open "raycast://extensions/raycast/raycast/create-quicklink"]] ] ;;â€¢ =+f for COMMAND

	 	;; [:c [[:SPKR3] [:open ""]] ] ;;â€¢ =+XXX for COMMAND
	 	;; [:a [[:SPKR3] [:open "URL"]] ] ;;â€¢ =+XXX for COMMAND


]}

;;============================ BACKSLASH MODE============================
	{	:des "backslash-mode for..." :rules [
	:backslash& ;;* â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
	;; [:r [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/quick-capture"]] ] ;;â€¢ \+r to capture Roam notes
	;; [:a [[:SPKR3] [:open "raycast://extensions/raycast/apple-notes/add-text"]] ] ;â€¢ \+a for add text to apple notes 
	;; [:o [[:SPKR3] [:open "raycast://extensions/millin_gabani/obsidian-smart-capture/capture"]] ] ;;â€¢ \+o for Obsidian

	;; [:b [[:SPKR3] [:open "raycast://extensions/hmarr/bear/new-note"]]] ;;â€¢ \+b for new bear 
	;; [:XXX [[:SPKR3] [:open "URL"]] ] ;;â€¢ \+XXX for 
	;; [b [[:SPKR3] [:open]] ] ;;â€¢ \+XXX for 

		; [:s [:ToKey]] ;;â€¢ quote+s for ToKey hello
]}

;;========================== RETURN MODE ==========================
{	:des "return-mode for..." :rules [:return-mode
		[:delete_or_backspace :!Tdelete_or_backspace] ;;â€¢ return+delete for dismiss notification (via âŒƒâ†©) ğŸ’¡  could also just use â­•to purge
		[:spacebar [[:SPKR3] :!COSTreturn_or_enter]] ;;â€¢ return+spacebar for focus menubard (via bartender hotkey)

	[:!SCc [[:ğŸ›] [:open "raycast://confetti"]]]
	
	
	;; [:t [:km "Master.Taskpaper"]]
	[:t [:km "Master.Taskpaper"]]
	[:g [:km "Master.Taskpaper"]]

	;;* Menubar
	[:r [:open "raycast://extensions/raycast/apple-reminders/create-reminder"]] ;;â€¢ return+r for raycast reminders
	;; [:slash [:open "raycast://extensions/raycast/apple-reminders/my-reminders"]] ;;â€¢ r+= raycast my reminders

	]}

;;============================ (FORWARD) SLASH MODE ==========================
		{	:des "slash-mode  for..." :rules [
		:slash-mode ;;* â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“

		;; [:spacebar [:!CSslash [:SPKR3]] ] ;;â€¢ slash+spacebar for Help Menu Search (via System hotkey âŒ˜â‡§+/) ğŸŸ¢
		;; [:spacebar [:open "kmtrigger://macro=F02A9897-43EA-42E6-89DD-33644529F73A"] ] ;;â€¢ slash+spacebar for Help Menu Search (via System hotkey âŒ˜â‡§+/) ğŸŸ¢
		;; [:spacebar [:km "/+spacebar for Help Menu"] ] ;;â€¢ slash+spacebar for Help Menu Search (via System hotkey âŒ˜â‡§+/) ğŸŸ¢

	 	;; [:h [[:SPKR3] [:open "alfred://runtrigger/com.alfredapp.hookbookmark/search-hookmark-bookmarks/"]] ] ;;â€¢ /+h to Search Hookmark Bookmarks (via Alfred worflow URL)
	 	
		;; have Apple Notes Obsidian, Notion, Bear, 
		[:q [[:SPKR3] [:open "raycast://extensions/raycast/raycast/search-quicklinks"]] ] ;;â€¢ /+q to Search Quick Links via Raycast
		[:a [[:SPKR3] [:open "raycast://extensions/raycast/apple-notes/index"]] ] ;;â€¢ /+o to search obsidian via searchnote command (raycast)
	 	[:r [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/search"]] ] ;;â€¢ /+r to search Roam notes vvis raycast 
		[:o [[:SPKR3] [:open "raycast://extensions/KevinBatdorf/obsidian/searchNoteCommand"]] ] ;;â€¢ /+o to search obsidian via searchnote command (raycast)
		[:b [[:SPKR3] [:open "raycast://extensions/hmarr/bear/index"]] ] ;;â€¢ /+b to search Bear (raycast)
	 	
		;;â€¢ Roam and Reminders commands
		[:r [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/search"]] ] ;;â€¢ /+r to search Roam ğŸŸ¢
		[:!Cr [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/quick-capture"]] ] ;;â€¢ /+r to capture to Roam ğŸŸ¢
		[:#Sr [[:SPKR3] [:open "raycast://extensions/notion/notion/add-text-to-page?arguments=%7B%22text%22%3A%22%22%7D"]]] ;;â€¢ /+âŒ˜n create Notion database page 
		[:#Tr [[:SPKR3] [:open "raycast://extensions/raycast/apple-reminders/my-reminders"]]] ;;â€¢ /+âŒ˜n create Notion database page 
		[:#TCr [[:SPKR3] [:open "raycast://extensions/raycast/apple-reminders/create-reminder"]]] ;;â€¢ /+âŒ˜n create Notion database page 


		;;â€¢ Bear
		;;â€¢ Obsidian
		;;â€¢ APN
		;;â€¢ Notion Commands
		;; 
		;; 	
		;
		;;
	 	
		[:n [[:SPKR3] [:open "raycast://extensions/notion/notion/search-page"]]] ;;â€¢ /+âŒ˜n for Search Notion via raycast
		[:#Cn [[:SPKR3] [:open "raycast://extensions/notion/notion/create-database-page"]]] ;;â€¢ /+âŒ˜n create Notion database page 
		[:#Sn [[:SPKR3] [:open "raycast://extensions/notion/notion/add-text-to-page?arguments=%7B%22text%22%3A%22%22%7D"]]] ;;â€¢ /+âŒ˜n create Notion database page 
		[:#Tn [[:SPKR3] [:open "raycast://extensions/notion/notion/quick-capture"]]] ;;â€¢ /+âŒ˜n create Notion database page 
		[:#On [[:SPKR3] [:open "https://notion.new"]]] ;;â€¢ /+âŒ˜n create Notion database page  

		[:#SCn [[:SPKR3] [:open "raycast://extensions/reckoning-dev/search-notion/commandSearchNotion "]]] ;;â€¢ /+âŒ˜n create Notion database page 
		[:#TCn [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/quick-capture"]]] ;;â€¢ /+âŒ˜n create Notion database page
		[:#OCn [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/quick-capture"]]] ;;â€¢ /+âŒ˜n create Notion database page
		[:#TOn [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/quick-capture"]]] ;;â€¢ /+âŒ˜n create Notion database page
		[:#STn [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/quick-capture"]]] ;;â€¢ /+âŒ˜n create Notion database page
		[:#SOn [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/quick-capture"]]] ;;â€¢ /+âŒ˜n create Notion database page
		[:#SCn [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/quick-capture"]]] ;;â€¢ /+âŒ˜n create Notion database page

		[:#SOCn [[:SPKR3] [:open "https://notion.new"]]] ;;â€¢ /+âŒ˜n create Notion database page 
		[:#TOCn [[:SPKR3] [:open "raycast://extensions/notion/notion/search-page"]]] ;;â€¢ /+âŒ˜n create Notion database page
		[:#STOn [[:SPKR3] [:open "raycast://extensions/notion/notion/add-text-to-page?arguments=%7B%22text%22%3A%22%22%7D"]]] ;;â€¢ /+âŒ˜n create Notion database page
		[:#STCn [[:SPKR3] [:open "raycast://extensions/notion/notion/add-text-to-page?arguments=%7B%22text%22%3A%22%22%7D"]]] ;;â€¢ /+âŒ˜n create Notion database page

		[:#Qm [[:SPKR3] [:open "raycast://extensions/notion/notion/create-database-page"]]] ;;â€¢ /+âŒ˜n create Notion database page 
		[:#RScomma [[:SPKR3] [:open "raycast://extensions/notion/notion/create-database-page"]]] ;;â€¢ /+âŒ˜n create Notion database page 


				

		[:8 [[:SPKR3] [:open "kmtrigger://macro=F5EDE946-40E2-4AEA-827F-48CEFD38689D"]] ] ;;â€¢ /+d to search Dynalist (via km)
		[:l [[:SPKR3] [:open "raycast://extensions/futantan/logseq/logsearch"]] ] ;;â€¢ /+l to search logdeq (via Raycast)
		;; [:left_gui [[:SPKR3] [:open "kmtrigger://macro=F5EDE946-40E2-4AEA-827F-48CEFD38689D"]] ] ;;â€¢ /+left_gui to seek Superkey
		
		;; [:r [[:SPKR3] [:open "raycast://extensions/roamresearch/roam-research/search "]] ] ;;â€¢ /+r to search Roam notes vvis raycast 
		;; kmtrigger://macro=Dynalist%3A%20Search

	[:#SCh [[:SPKR3] [:open "file:///Users/loudog/"]]] ;;â€¢ /+âŒ˜n create Notion database page 
	[:#SCd [[:SPKR3] [:open "file:///Users/loudog/Desktop"]]] ;;â€¢ /+âŒ˜n create Notion database page 
	[:#SCa [[:SPKR3] [:open "file:///Users/loudog/Applications"]]] ;;â€¢ /+âŒ˜n create Notion database page
	[:#SCs [[:SPKR3] [:open "file:///Users/loudog/Sync"]]] ;;â€¢ /+âŒ˜n create Notion database page
	[:#SCs [[:SPKR3] [:open "file:///Users/loudog/Sync"]]] ;;â€¢ /+âŒ˜n create Notion database page



	]}
;;============================ OTHER MODE ========================== â­• TODO [ ] \ /

;;* App Filtering ====================
;; â„¹ï¸ app filtering notes:
	;; application modes are defined with regex of the bundleID of the app
	;; so far drafts-mode works


;; {:des "app-mode":rules[[condi :appname]
;; [:#Cj [:open "something"]]
;; ]}
;; {:des "bear-mode":rules[[condi :Bear]
;; [:#Cj [:open "something"]]
;; ]}

{:des "drafts-mode":rules[
	[:condi :draftsApp]
	;; [:condi :drafts]
	[:!TCw [:open "raycast://confetti"]] ;;â€¢ /+q to Search Quick Links via Raycast
	[:!TCw [:km "Â© Open in New Window"]] ;;â€¢ /+q to Search Quick Links via Raycast
	]}

{:des "browsers":rules[ ;; ğŸ‘ this works, so problem with above could be escaping the bundle id, KM issue, turned off confetty
	[:condi :Browsers]
	;; [:c [:open "raycast://confetti"]]
	;; [:!TCw [ ] ;;â€¢ /+q to Search Quick Links via Raycast
	]}
;; ]}

] ;; CLOSES main




:simlayer-threshold 210 ;def = 50 ;! when set to 1000 there is very noticable delay and 50 isnt enough time, 300 too much
	;! seems to create obsene delay on  on key up
;;* Devices, Applications and Input Sources  ==================================
	:devices {
			:macbook-internal [{:product_id 631 :vendor_id 1452}]
			:uhk [{:product_id 24866 :vendor_id 7504}]
			:uhk-2 [{:product_id 24868 :vendor_id 7504}]
			:logitech-mouse [{:product_id 49738 :vendor_id 1133}]
			;; TODO add other gaming mouse, 
			;;? i wonder if you can filter for universal control and fix some of those problems

			}
;;* APPLICATIONS
	:applications {
		;; :vscode
					
		;; :bear ["^net\\.shinyfrog\\.bear$"] ;; todo, not working yet...
		:drafts        ["^com\\.agiletortoise\\.Drafts-OSX"] ;; ğŸ‘ works
		
		:slidepad	   ["^com\\.slidepad\\.slidepad-setapp"]
		:dynalist      ["^io\\.dynalist$"]
		:Finder        ["^com\\.apple\\.finder$"]
;; ------------- groups
		:Terminals     ["^com\\.apple\\.Terminal$", "^com\\.googlecode\\.iterm2$", "^co\\.zeit\\.hyperterm$", "^co\\.zeit\\.hyper$", "^io\\.alacritty$", "^net\\.kovidgoyal\\.kitty$"]
		:Debuggers     ["^org\\.mozilla\\.firefox$", "^org\\.mozilla\\.firefoxdeveloperedition$", "^com\\.google\\.Chrome$", "^org\\.chromium\\.Chromium$", "^com\\.google\\.Chrome\\.canary$", "^com\\.apple\\.Safari$", "^com\\.microsoft\\.VSCode$"]
		:Browsers      ["^org\\.mozilla\\.firefox$", "^org\\.mozilla\\.firefoxdeveloperedition$", "^com\\.google\\.Chrome$", "^org\\.chromium\\.Chromium$", "^com\\.google\\.Chrome\\.canary$", "^com\\.apple\\.Safari$"]
		:Chromes       ["^com\\.google\\.Chrome$", "^org\\.chromium\\.Chromium$", "^com\\.google\\.Chrome\\.canary$"]
		}
	
	
:input-sources {
		:squirrel {:input_mode_id   "com.googlecode.rimeime.inputmethod.Squirrel"
					:input_source_id "com.googlecode.rimeime.inputmethod.Squirrel.Rime"
					:language        "zh-Hans"}
		:us {:input_mode_id   ""
				:input_source_id "com.apple.keylayout.US"
				:language        "en"}
		}
;; * conditions 
;; [{:des   "conditions" :rules [[:condi :us :hhkb]
;;  [:l :!COi [:Browsers :z-mode]]]}]}
;; text you'd put in the rules

}
;;*============================ END ===============================

;; todo